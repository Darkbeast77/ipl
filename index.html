<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Streaming Hub</title>
    <style>
        /* [Previous CSS remains unchanged] */
    </style>
</head>
<body>
    <!-- Welcome Popup -->
    <div class="popup-overlay" id="welcome-popup">
        <div class="popup-content">
            <h2 class="popup-title">WELCOME TO SCOOBY</h2>
            <p>Enter your name to access premium streams</p>
            <input type="text" id="user-name" class="popup-input" placeholder="Your Name" autocomplete="off">
            <button class="popup-button" onclick="submitUserName()">ENTER</button>
            <p class="popup-welcome-msg">Experience the best streaming quality!</p>
        </div>
    </div>

    <div class="container" id="main-content">
        <header>
            <h1>Scooby Streaming Hub</h1>
            <div>
                <span id="current-time"></span>
                <span id="welcome-message" class="welcome-user"></span>
            </div>
        </header>
        
        <div class="watch-time-container">
            <div class="watch-time-label">YOUR WATCH TIME</div>
            <div id="watch-time" class="watch-time-value">00:00:00</div>
        </div>
        
        <div class="channels">
            <div class="channel-btn" onclick="playStream('https://prod-ent-live-gm.jiocinema.com:4JUdGzvrMFDWrUUwY3toJATSeNwjn54LkCnKBPRzDuhzi5vSepHfUckJNxRL2gjkNrSqtCoRUrEDAgRwsQvVCjZbRyFTLRNyDmT1a1boZV')"> IPL ENGLISH </div>
            <div class="channel-btn" onclick="playStream('https://prod-ent-live-gm.jiocinema.com:4JUdGzvrMFDWrUUwY3toJATSeNwjn54LkCnKBPRzDuhzi5vSepHfUckJNxRL2gjkNrSqtCoRUrEDAgRwsQvVCjZbRyFTLRNyDmT1a1boZV')"> IPL HINDI</div>
            <div class="channel-btn" onclick="playStream('https://prod-ent-live-gm.jiocinema.com:4JUdGzvrMFDWrUUwY3toJATSeNwjn54LkCnKBPRzDuhzi5vSepHfUckJNxRL2gjkNrSqtCoRUrEDAgRwsQvVCjZbRyFTLRNyDmT1a1boZV')"> IPL TELUGU </div>
            <div class="channel-btn" onclick="playStream('https://prod-ent-live-gm.jiocinema.com:4JUdGzvrMFDWrUUwY3toJATSeNwjn54LkCnKBPRzDuhzi5vSepHfUckJNxRL2gjkNrSqtCoRUrEDAgRwsQvVCjZbRyFTLRNyDmT1a1boZV')"> IPL TAMIL</div>
            <div class="channel-btn" onclick="playStream('https://prod-ent-live-gm.jiocinema.com:4JUdGzvrMFDWrUUwY3toJATSeNwjn54LkCnKBPRzDuhzi5vSepHfUckJNxRL2gjkNrSqtCoRUrEDAgRwsQvVCjZbRyFTLRNyDmT1a1boZV')"> IPL BENGALI</div>
       </div>
        
        <div class="player-container" id="player-container">
            <div class="no-stream">
                <p>Select a channel or add a custom stream to start watching</p>
            </div>
        </div>
        
        <div class="play-info">
            Open in google chrome and wait 5-10 sec to load the stream
        </div>
        
        <div class="custom-stream">
            <h3>Add Your Stream Link</h3>
            <input type="text" id="custom-url" placeholder="Enter .m3u8 or .ts stream URL...">
            <button onclick="playCustomStream()">Play Stream</button>
        </div>
    </div>

    <!-- Maintenance Mode Content -->
    <div class="container" id="maintenance-content" style="display: none;">
        <header>
            <h1>Scooby Streaming Hub</h1>
            <div id="maintenance-time"></div>
        </header>
        
        <div class="maintenance-container">
            <div class="maintenance-icon">⚠️</div>
            <h2 class="maintenance-title">Under Maintenance</h2>
            <p class="maintenance-message">
                We're currently improving our streaming services to provide you with a better experience.
                Please check back later. We apologize for any inconvenience.
            </p>
            <p>Expected to be back at 6:30 PM IST.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.12/hls.min.js"></script>
    <script>
        // Maintenance mode control - CHANGE THIS LINE TO TOGGLE
        let underMaintenance = "No"; // Set to "Yes" for maintenance mode, "No" for normal operation
        
        // Global variables for watch time tracking
        let isWatching = false;
        let watchSeconds = 0;
        let watchTimer;
        let userName = "";
        
        // Initialize features when page loads
        window.onload = function() {
            checkMaintenanceStatus();
            
            // Allow Enter key to submit custom URL
            document.getElementById('custom-url').addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    playCustomStream();
                }
            });
            
            // Allow Enter key to submit name in popup
            document.getElementById('user-name').addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    submitUserName();
                }
            });
            
            // Start watch time counter
            startWatchTimeCounter();
            
            // Check if user has already entered name (for session persistence)
            const storedName = sessionStorage.getItem('scoobyUserName');
            if (storedName) {
                userName = storedName;
                document.getElementById('welcome-message').textContent = "Welcome, " + userName;
                document.getElementById('welcome-popup').style.display = 'none';
            }
        };
        
        function submitUserName() {
            const nameInput = document.getElementById('user-name');
            userName = nameInput.value.trim();
            
            if (userName) {
                // Store in session
                sessionStorage.setItem('scoobyUserName', userName);
                
                // Display welcome message
                document.getElementById('welcome-message').textContent = "Welcome, " + userName;
                
                // Hide popup
                document.getElementById('welcome-popup').style.display = 'none';
            } else {
                nameInput.style.borderColor = '#ff0000';
                nameInput.style.boxShadow = '0 0 10px rgba(255, 0, 0, 0.5)';
                setTimeout(() => {
                    nameInput.style.borderColor = 'var(--neon-primary)';
                    nameInput.style.boxShadow = '0 0 5px rgba(0, 255, 102, 0.2)';
                }, 1000);
            }
        }
        
        function checkMaintenanceStatus() {
            const mainContent = document.getElementById('main-content');
            const maintenanceContent = document.getChannelById('maintenance-content');
            const welcomePopup = document.getElementById('welcome-popup');
            
            if (underMaintenance === "Yes") {
                mainContent.style.display = 'none';
                maintenanceContent.style.display = 'block';
                welcomePopup.style.display = 'none';
                updateMaintenanceTime();
                setInterval(updateMaintenanceTime, 1000);
            } else {
                mainContent.style.display = 'block';
                maintenanceContent.style.display = 'none';
                updateIndianTime();
                setInterval(updateIndianTime, 1000);
            }
        }
        
        // Indian Standard Time Clock
        function updateIndianTime() {
            const options = {
                timeZone: 'Asia/Kolkata',
                hour12: true,
                hour: 'numeric',
                minute: 'numeric',
                second: 'numeric'
            };
            
            const indianTime = new Date().toLocaleString('en-US', options);
            document.getElementById('current-time').textContent = indianTime + ' IST';
        }
        
        // Maintenance Mode Time
        function updateMaintenanceTime() {
            const options = {
                timeZone: 'Asia/Kolkata',
                hour12: true,
                hour: 'numeric',
                minute: 'numeric',
                second: 'numeric'
            };
            
            const indianTime = new Date().toLocaleString('en-US', options);
            document.getElementById('maintenance-time').textContent = indianTime + ' IST';
        }
        
        // User Watch Time
        function startWatchTimeCounter() {
            watchTimer = setInterval(function() {
                if (isWatching) {
                    watchSeconds++;
                    updateWatchTimeDisplay();
                }
            }, 1000);
        }
        
        function updateWatchTimeDisplay() {
            const hours = Math.floor(watchSeconds / 3600);
            const minutes = Math.floor((watchSeconds % 3600) / 60);
            const seconds = watchSeconds % 60;
            
            const timeString = 
                String(hours).padStart(2, '0') + ':' + 
                String(minutes).padStart(2, '0') + ':' + 
                String(seconds).padStart(2, '0');
                
            document.getElementById('watch-time').textContent = timeString;
        }
        
        function createVideoElement() {
            const playerContainer = document.getElementById('player-container');
            playerContainer.innerHTML = '';
            
            const video = document.createElement('video');
            video.id = 'video-player';
            video.controls = true;
            video.autoplay = true;
            
            playerContainer.appendChild(video);
            return video;
        }
        
        function playStream(url) {
            // Check if site is in maintenance mode
            if (underMaintenance === "Yes") {
                return;
            }
            
            // Check if user has entered name
            if (!userName) {
                document.getElementById('welcome-popup').style.display = 'flex';
                return;
            }
            
            // Start tracking watch time when stream starts
            isWatching = true;
            
            const video = createVideoElement();
            
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    video.play();
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                // For Safari
                video.src = url;
                video.addEventListener('loadedmetadata', function() {
                    video.play();
                });
            } else {
                alert('Your browser does not support HLS playback');
            }
        }
        
        function playCustomStream() {
            // Check if site is in maintenance mode
            if (underMaintenance === "Yes") {
                return;
            }
            
            // Check if user has entered name
            if (!userName) {
                document.getElementById('welcome-popup').style.display = 'flex';
                return;
            }
            
            const customUrl = document.getElementById('custom-url').value.trim();
            if (customUrl) {
                playStream(customUrl);
            } else {
                alert('Please enter a valid stream URL');
            }
        }
        
        // Update before user leaves
        window.addEventListener('beforeunload', function() {
            // Reset watch time tracking
            isWatching = false;
            clearInterval(watchTimer);
        });
    </script>
</body>
</html>
